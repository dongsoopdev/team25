<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<html lang="en">

<!-- head include-->
<head>
    <th:block th:insert="~{layout/head.html :: head}"></th:block>
    <link type="text/css" rel="stylesheet" th:href="@{/css/member/myProductList.css}">
    <title> 상품 관리 </title>
</head>

<script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<body>
<!-- header include-->
<header class="header" id="hd">
    <div th:insert="~{layout/header :: header}"></div>
</header>

<!--contens 필수-->
<div class="contents">
    <div class="container ">




        <div id="ud_tab" style="">
            <input type="radio" name="ud_tabs" id="tab1" checked>
            <label for="tab1"><strong>상품 등록</strong></label>

            <input type="radio" name="ud_tabs" id="tab2">
            <label for="tab2"><strong>상품 관리</strong></label>

            <input type="radio" name="ud_tabs" id="tab3">
            <label for="tab3"><strong>구매 내역</strong></label>

            <input type="radio" name="ud_tabs" id="tab4">
            <label for="tab4"><strong>내가 쓴 후기</strong></label>

            <input type="radio" name="ud_tabs" id="tab5">
            <label for="tab5"><strong>받은 후기</strong></label>


            <input type="radio" name="ud_tabs" id="tab6">
            <label for="tab6"><strong>찜</strong></label>


            <!-- 모든강좌정보  -->
<!--
            <div class="all_lecture_info">
                &lt;!&ndash; 강의 등록 &ndash;&gt;
            </div>
-->


            <!--상품 등록-->
            <div id="ud_tab-content1" class="ud_content">

            </div>



            <!--상품 관리-->
            <div id="ud_tab-content2" class="ud_content">

                <div class="page_wrap">
                    <h2 class="page_tit"></h2>
                    <table class="table text-center">
                        <thead>
                        <tr>
                            <th class="text-center" style="vertical-align: middle">사진</th>
                            <th class="text-center" style="vertical-align: middle">판매상태</th>
                            <th class="text-center" style="vertical-align: middle">상품명</th>
                            <th class="text-center" style="vertical-align: middle">가격</th>
                            <th class="text-center" style="vertical-align: middle">등록일</th>
                            <th class="text-center" style="vertical-align: middle">비고</th>
                        </tr>
                        </thead>
                        <tbody>

                        <tr th:each="pro: ${myproList}">
                            <td>
                                <div class="img_tit">
                                    <a th:href="@{'/product/getProduct/' + ${pro.pno}}">
                                        <img th:src="@{'/upload/' + ${pro.getImgsrc1()}}" alt="" style="    width: 150px;">
                                    </a>
                                </div>
                            </td>

                            <td>
                                <p th:text="${pro.getStatus()}"></p>
                            </td>

                            <td>
                                <p th:text="${pro.getPname()}"></p>
                            </td>



                            <td>
                                <p th:text="${pro.getPrice()}"></p>
                            </td>

                            <td>
                                <p th:text="${pro.getResdate()}"></p>
                            </td>

                            <td>

                                <div class="btn_group">
                                    <a th:href="@{'/product/updateProduct/' + ${pro.pno}}" class="btn btn-primary">수정</a>
                                    <a th:href="@{'/product/deleteProduct/' + ${pro.pno}}" class="btn btn-danger">삭제</a>
                                </div>
                            </td>


                        </tr>

                        </tbody>
                    </table>


                </div>
            </div>


            <!--구매/판매 내역-->
            <div id="ud_tab-content3" class="ud_content">
                <div class="page_wrap">
                    <h2 class="page_tit"></h2>
                    <table class="table text-center">
                        <thead>
                        <tr>
                            <th class="text-center" style="vertical-align: middle">사진</th>
                            <th class="text-center" style="vertical-align: middle">배송현황</th>
                            <th class="text-center" style="vertical-align: middle">상품명</th>
                            <th class="text-center" style="vertical-align: middle">가격</th>
                            <th class="text-center" style="vertical-align: middle">구매일</th>
                            <th class="text-center" style="vertical-align: middle">비고</th>
                        </tr>
                        </thead>
                        <tbody>

                        <tr th:each="pay: ${myPayList}">
                            <td>
                                <div class="img_tit">
                                    <a th:href="@{'/product/getProduct/' + ${pay.pno}}">
                                        <img th:src="@{'/upload/' + ${pay.imgsrc1}}" alt="" style="    width: 150px;">
                                    </a>
                                </div>
                            </td>

                            <td>
                                <p th:text="${pay.ship == 1 ? '배송전' : (pay.ship == 2 ? '배송중' : (pay.ship == 3 ? '배송완료' : '거래종료'))}"></p>
                            </td>

                            <td>
                                <p th:text="${pay.pname }"></p>
                            </td>



                            <td>
                                <p th:text="${pay.price}"></p>
                            </td>

                            <td>
                                <p th:text="${pay.resdate}"></p>
                            </td>

                            <td>

                                <div class="btn_group">
                                    <a class="btn btn-primary" th:if="${pay.ship != 4}" th:href="@{'/pay/payComplete/' + ${pay.pno}+'/'+${pay.payNo}}">구매확정</a>
                                    <a class="btn btn-success" th:href="@{'/product/addReviewForm/' + ${pay.pno}}"  th:if="${pay.ship == 4}">후기 남기기</a>
                                    <!-- 후기를 작성했을 때만 보여야한당 -->
                                    <a class="add-to-cart-btn" th:href="@{'/product/addReviewForm/' + ${pay.pno}}">작성한 후기 확인</a>
                                </div>
                            </td>


                        </tr>

                        </tbody>
                    </table>


                </div>
            </div>


           <!--내가 쓴 후기-->
            <div id="ud_tab-content4" class="ud_content">


                <div id="container">
                    <div class="mypage-base">
                        <article class="my-page">
                            <main class="container__inner">
                                <table class="table is-fullwidth" id="table">
                                    <thead>
                                    <tr>
                                        <th class="rev" style="width: 15%">강의</th>
                                        <th class="rev" style="width: 20%">점수</th>
                                        <th class="rev-con" style="width: 50%">후기</th>
                                        <th class="rev2" style="width: 15%">작성일</th>
                                        <th class="rev2">비고</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <th:forEach var="lev" items="${reviewList }" varStatus="status">
                                        <tr>
                                            <td><a href="${path14}/lecture/getLecture?no=${lev.lno}">${lev.title}</a></td>
                                            <td class="starRating" data-score="${lev.score}"></td>
                                            <td>${lev.content}</td>
                                            <td>
                                          <!--      <fmt:parseDate value="${lev.resdate}" var="resdate" pattern="yyyy-MM-dd HH:mm:ss" />
                                                <fmt:formatDate value="${resdate}" pattern="yyyy-MM-dd" />-->
                                            </td>

                                        </tr>
                                    </th:forEach>
                                    </tbody>
                                </table>
                                <script>
                                    $(document).ready(function() {
                                        const filledStarPath = '${path14}/resources/img/star.png';
                                        const emptyStarPath = '${path14}/resources/img/empty_star.png';

                                        function renderStars($starContainer, score) {
                                            $starContainer.empty(); // 기존 내용을 지웁니다.
                                            for (let i = 1; i <= 5; i++) {
                                                const starPath = i <= score ? filledStarPath : emptyStarPath;
                                                const $star = $('<img>').attr('src', starPath)
                                                    .attr('alt', 'star')
                                                    .width(20)
                                                    .height(20);
                                                $starContainer.append($star);
                                            }
                                        }

                                        $('.starRating').each(function() {
                                            const $this = $(this);
                                            const score = $this.data('score');
                                            renderStars($this, score);
                                        });
                                    });
                                </script>


                            </main>
                        </article>


                    </div>

                </div>


            </div>





            <!--내가 받은 후기-->
            <div id="ud_tab-content5" class="ud_content">


                <div id="container">
                    <div class="mypage-base">
                        <article class="my-page">
                            <main class="container__inner">
                                <table class="table is-fullwidth" id="table">
                                    <thead>
                                    <tr>
                                        <th class="rev" style="width: 15%">강의</th>
                                        <th class="rev" style="width: 20%">점수</th>
                                        <th class="rev-con" style="width: 50%">후기</th>
                                        <th class="rev2" style="width: 15%">작성일</th>
                                        <th class="rev2">비고</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <th:forEach var="lev" items="${reviewList }" varStatus="status">
                                        <tr>
                                            <td><a href="${path14}/lecture/getLecture?no=${lev.lno}">${lev.title}</a></td>
                                            <td class="starRating" data-score="${lev.score}"></td>
                                            <td>${lev.content}</td>
                                            <td>
                                                <!--      <fmt:parseDate value="${lev.resdate}" var="resdate" pattern="yyyy-MM-dd HH:mm:ss" />
                                                      <fmt:formatDate value="${resdate}" pattern="yyyy-MM-dd" />-->
                                            </td>

                                        </tr>
                                    </th:forEach>
                                    </tbody>
                                </table>
                                <script>
                                    $(document).ready(function() {
                                        const filledStarPath = '${path14}/resources/img/star.png';
                                        const emptyStarPath = '${path14}/resources/img/empty_star.png';

                                        function renderStars($starContainer, score) {
                                            $starContainer.empty(); // 기존 내용을 지웁니다.
                                            for (let i = 1; i <= 5; i++) {
                                                const starPath = i <= score ? filledStarPath : emptyStarPath;
                                                const $star = $('<img>').attr('src', starPath)
                                                    .attr('alt', 'star')
                                                    .width(20)
                                                    .height(20);
                                                $starContainer.append($star);
                                            }
                                        }

                                        $('.starRating').each(function() {
                                            const $this = $(this);
                                            const score = $this.data('score');
                                            renderStars($this, score);
                                        });
                                    });
                                </script>


                            </main>
                        </article>
                    </div>
                </div>
            </div>




            <!--찜-->
            <div id="ud_tab-content6" class="ud_content">


            </div>


        </div>












    </div>
</div>

<!--footer include--->
<footer class="footer" id="ft">
    <div th:insert="~{layout/footer :: footer}"></div>
</footer>

<!-- script 사용시-->
<th:block layout:fragment="script">

</th:block>
</body>

</html>